@using Beporsoft.Blazor.Charts.Common
@using Beporsoft.Blazor.Charts.Configuration
@using System.Drawing
<Chart @ref="_chart" Config="_config" Data="_data" />


@code {
    private Chart? _chart;

    private ConfigBase _config = new();
    private ChartData _data = new();


    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            var labels = RandomDataGen.GetNumberSeries(1, 50);
            var data1 = RandomDataGen.GetDoubleSamples(-10, 10, 50);
            var data2 = RandomDataGen.GetDoubleSamples(40, 50, 50);
            var data3 = RandomDataGen.GetDoubleSamples(40, 20, 50);
            if (_chart is null)

                return;
            _config.Options.Title = new("Titulo");

            _config.Options
                .AddTitle("Line chart")
                .WithLocation(Position.Top, Align.Center)
                .WithFont(16);


            _config.AddCartesianAxis("x")
                .AddTitle("X axis");
            _config.AddCartesianAxis("y")
                .AddTitle("Y axis");

            _config.AddCartesianAxis("y2")
                .SetPosition(Position.Right)
                .AddTitle("Axis located at right");


            var dataset1 = new LineDataset<double>("Continuous line", data1);

            dataset1.SetLineColor(Color.FromArgb(100, 200, 100))
                    .SetPointStyle(PointStyle.Triangle, 6);

            var dataset2 = new LineDataset<double>("Stepped line", data2);
            dataset2.SetStepped();

            var dataset3 = new LineDataset<double>("Line axis at right", data3);
            dataset3.SetVerticalAxis("y2").SetLineColor(Color.Blue);





            _data.Labels = labels.ToList();
            _data.Datasets.Add(dataset1);
            _data.Datasets.Add(dataset2);
            _data.Datasets.Add(dataset3);

            _config.Options
                .AddSubtitle($"This is one line chart with {_data.Datasets.Count} datasets")
                .WithFont(12);

        }
    }

}
